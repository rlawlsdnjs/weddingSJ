name: Deploy to GitHub Pages

on:
    push:
        branches:
            - main # 'main' 브랜치에 푸시될 때마다 실행

jobs:
    build-and-deploy:
        runs-on: ubuntu-latest # GitHub Actions에서 사용하는 운영 체제

        steps:
            - name: Checkout the code
              uses: actions/checkout@v3 # 원격 레포지토리에서 코드를 가져옴

            - name: Set up Node.js
              uses: actions/setup-node@v3
              with:
                  node-version: "16" # Node.js 버전 설정

            - name: Install dependencies
              run: |
                  npm install  # 의존성 설치

            - name: Build the project
              run: |
                  npm run build  # 빌드 실행

            - name: Deploy to gh-pages
              run: |
                  npm install gh-pages --save-dev  # gh-pages 패키지 설치
                  npx gh-pages -d dist  # dist 폴더를 gh-pages 브랜치로 배포

              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # GitHub Actions에서 제공하는 자동 토큰
